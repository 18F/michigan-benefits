:ruby
  errors = f.object.errors[method]
  form_classes = ['form-group']
  form_classes << 'form-group--error' if errors.present?
  title = title.to_s.tr("\n", ' ').strip
  label_classes = ['form-question']
  label_classes << 'hidden' if local_assigns[:label_hidden]

%div{ 'data-md5': Digest::MD5.hexdigest(title), 'data-field-type': type,
      class: form_classes }
  - if %i[text_field household_checkboxes radios select yes_no].include?(type)
    = f.label method, title, class: 'form-question'

  - if local_assigns[:help]
    %p.text--help= help

  - case type
  - when :radios
    %div
      - options.each do |option|
        %label.radio-button<
          = f.radio_button method, option
          = option.titleize

  - when :text_field
    = f.text_field method,
      placeholder: local_assigns[:placeholder],
      class: 'text-input'

  - when :select
    .select
      = f.select method,
        options.map { |option| [option.titleize, option] },
        { include_blank: 'Choose one' },
        class: 'select__element'

  - when :yes_no
    %label.radio-button<
      = f.radio_button method, 'true'
      Yes
    %label.radio-button<
      = f.radio_button method, 'false'
      No

  - when :checkbox
    %label.checkbox
      = f.check_box method
      = title

  - when :household_checkboxes
    - household_members.each do |member|
      = f.fields_for 'household_members[]', member, hidden_field_id: true do |ff|
        %label.checkbox
          = ff.check_box method
          = member.name

  - when :household_radios
    - household_members.each do |member|
      = f.fields_for 'household_members[]', member, hidden_field_id: true do |ff|
        = ff.label method, header_name(member), class: 'form-question'
        %div
          - options.each do |option|
            %label.radio-button<
              = ff.radio_button method, option
              = option.titleize

  - if errors.present?
    %p.text--error
      %i.icon-warning
      = errors.to_sentence

  - if local_assigns[:safety]
    %p.text--secure
      %i.illustration.illustration--safety
      = safety
